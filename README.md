# geometric-identity-llm

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)


Wang, Z. (2026). Geometric Identity and Piecewise Constrained Manifolds: A Unified Framework for Logical Reasoning in Large Language Models. Zenodo. https://doi.org/10.5281/zenodo.18402828


æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **å‘é‡å‡ ä½•ç†è®º (Vector Geometry Theory, VGT)** çš„å®éªŒå·¥å…·åŒ…ï¼Œæ—¨åœ¨é€šè¿‡å‡ ä½•è§†è§’é‡åŒ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„é€»è¾‘æ¨ç†èƒ½åŠ›ã€‚æˆ‘ä»¬é€šè¿‡åˆ†æ `Qwen3-4B` ç­‰æ¨¡å‹çš„éšç©ºé—´æ‹“æ‰‘ï¼ŒéªŒè¯äº† **åˆ†æ®µçº¦æŸæµå½¢ (Piecewise Constrained Manifolds, PCM)** ä¸ **å‡ ä½•è®¤åŒè®º (Geometric Identity Theory, GIT)**
ã€‚

![Layer 0 PCM](Figure.png)

## ğŸ§ª æ ¸å¿ƒå®éªŒå‘ç°

åŸºäºæœ¬é¡¹ç›®ä»£ç å¯¹ `Qwen3-4B` å±‚çº§ç‰¹å¾çš„æå–ï¼Œæˆ‘ä»¬éªŒè¯äº†ä»¥ä¸‹ VGT æ ¸å¿ƒå‘ç°ï¼š

1. [cite_start]**åˆ†æ®µçº¦æŸæµå½¢ (PCM) çš„å‘ç° [cite: 7, 49, 60]**ï¼š
   - [cite_start]åœ¨ Layer 0 ä¸­ï¼Œæ•°å­— 0-9 å¹¶éå‡åŒ€åˆ†å¸ƒï¼Œè€Œæ˜¯å½¢æˆäº†ä¸€ä¸ª **1D åˆ†æ®µçº¦æŸæµå½¢** [cite: 7, 50]ã€‚
   - [cite_start]**è¿›ä½è¾¹ç•Œæ•ˆåº”**ï¼šæ­¥é•¿åˆ†å¸ƒå‘ˆç°æ˜¾è‘—çš„éå•è°ƒæ€§ï¼ˆ$CV=0.664$ï¼‰ï¼Œåœ¨æ•°å­— **4â†’5** å¤„è§‚å¯Ÿåˆ° **54.4% çš„æ­¥é•¿éª¤é™**ï¼Œè¿™è¢«ç¡®è®¤ä¸ºâ€œè¿›ä½è¾¹ç•Œè§¦å‘å™¨â€çš„å‡ ä½•ç¼–ç  [cite: 7, 52, 61]ã€‚

2. [cite_start]**é€»è¾‘è¿æ¥è¯çš„å‡ ä½•å½’ä¸€åŒ– [cite: 8, 53]**ï¼š
   - [cite_start]é€»è¾‘é”šç‚¹ï¼ˆå¦‚â€œå› ä¸ºâ€ã€â€œæ‰€ä»¥â€ï¼‰åœ¨æµå½¢ä¸Šè¡¨ç°å‡º **2.65å€çš„å¼‚å¸¸èšé›†** [cite: 8, 54]ã€‚
   - [cite_start]è¿™ç§èšé›†è¯æ˜äº†ç®—æœ¯é€»è¾‘ä¸å› æœæ¨ç†åœ¨å‡ ä½•åº•å±‚æ˜¯ç»Ÿä¸€çš„ [cite: 8]ã€‚

3. [cite_start]**å‡ ä½•è®¤åŒè®º (GIT) çš„éªŒè¯ [cite: 10, 63]**ï¼š
   - [cite_start]å®éªŒè¯å® Token çš„èº«ä»½å®Œå…¨ç”±å…¶åœ¨é€»è¾‘æµå½¢ä¸Šçš„ **å‡ ä½•åæ ‡** å†³å®š [cite: 10, 64]ã€‚
   - [cite_start]**ç®—å­é•œåƒå®éªŒ**ï¼šé€šè¿‡äº¤æ¢â€œ+â€ä¸â€œ-â€çš„åµŒå…¥å‘é‡ï¼Œæ¨¡å‹è¡Œä¸ºå‘ç”Ÿå®Œå…¨åè½¬ï¼ˆè¾“å…¥ `5+1` è¾“å‡º `4`ï¼‰ï¼Œä½†è§„åˆ™ä¸€è‡´æ€§ä¿æŒå®Œç¾ï¼Œè¯æ˜è¯­ä¹‰ä»…æ˜¯å‡ ä½•çš„é™„å¸¦ç°è±¡ [cite: 9, 58, 64]ã€‚


## ğŸ› ï¸ åŠŸèƒ½ç‰¹æ€§

- **å¤šå±‚éšè—çŠ¶æ€æå–**ï¼šæ‹¦æˆªå¹¶åˆ†æä» Embedding å±‚åˆ°æ·±å±‚ï¼ˆLayer 22/23ï¼‰çš„ `hidden_states`ã€‚
- **å‡ ä½•é‡åŒ–æŒ‡æ ‡**ï¼šè‡ªåŠ¨è®¡ç®—æ­¥é•¿åˆ†å¸ƒã€å˜å¼‚ç³»æ•° (CV) ä»¥åŠé€»è¾‘å‹ç¼©æ¯”ï¼ˆCompression Ratioï¼‰ã€‚
- **VGT ç»“æ„åˆ¤å®š**ï¼šåŸºäºæµå½¢åç¼©ç†è®ºï¼Œè‡ªåŠ¨è¯Šæ–­æ¨¡å‹æ˜¯å¦å…·å¤‡å¯é çš„å¤–æ¨ï¼ˆExtrapolationï¼‰æ½œè´¨ã€‚

## ğŸ“Š å®éªŒæ•°æ®å¯¹æ¯” (Qwen3-4B)

| è§‚å¯Ÿç»´åº¦ | Layer 0 (åˆå§‹åŒ–å±‚) | Layer 22/23 (é€»è¾‘åˆæˆå±‚) | VGT ç†è®ºè§£é‡Š |
| :--- | :--- | :--- | :--- |
| **æ­¥é•¿ CV å€¼** | 0.6 - 0.9 | **2.6+ (æœ¬é¡¹ç›®è§‚æµ‹å€¼)** | [cite_start]ä» PCM æµå½¢å‘é«˜é˜¶ç®—æ³•ç®—å­çš„ç›¸å˜ [cite: 7, 11] |
| **é€»è¾‘å‹ç¼©æ¯”** | ~0.8 (è¯­ä¹‰åˆ†æ•£) | **0.03x (æåº¦åç¼©)** | [cite_start]é€»è¾‘ç®—å­çš„å¼ºåˆ¶åç¼©ä¸ç›¸ä½å¯¹é½ [cite: 11, 26] |
| **æµå½¢å½¢æ€** | [cite_start]åˆ†æ®µçº¿æ€§ PCM [cite: 60] | [cite_start]åŠ¨æ€ç®—æ³•éª¨æ¶ [cite: 17] | [cite_start]é€»è¾‘ä¸æ˜¯è§„æ¨¡é—®é¢˜ï¼Œè€Œæ˜¯å‡ ä½•ç®€æ´æ€§ [cite: 29, 70] |

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
pip install torch transformers scikit-learn matplotlib

# è¿è¡Œ VGT å‡ ä½•æ¢æµ‹è„šæœ¬
python VGT_DeepLogic_Manifold.py
```
